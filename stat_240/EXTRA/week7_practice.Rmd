---
title: "Probability"
output: html_document
author: vardaan kapoor
---




```{r setupchunk,include=FALSE}
knitr::opts_chunk$set(echo=TRUE,message=FALSE,warning=FALSE,error=TRUE,fig.height=4)
library(tidyverse)
library(dplyr)
library(kableExtra)
source("./../COURSE/scripts/viridis.R")
source("./../COURSE/scripts/ggprob.R")
```

# THEORY
##### just importing soome functions which can be used in the program and giving them soome alias names to call those functions
\newcommand{\E}{\mathsf{E}}
\newcommand{\Var}{\mathsf{Var}}
\newcommand{\SD}{\mathsf{SD}}
\renewcommand{\prob}{\mathsf{P}}


## continuous distributions

- concept of probability space-mathematical formalization that attatches probabilities with events and their occurrences
-statistical models can describe behavior of random variables
  - have  model assumptions
  - statistical estimation:predict unknown values of a process
  - hypothesis testing:make a basis or thesis for predicting observable behavior
  - prediction:make statements about the chances of happening of some event
- continuous distributions have a probability density function
  - non  negative function which maps the area under the graph which is equal to the probability
  - probability over an interval=area under the graph over that interval
  - probability on calculus: the notation $\displaystyle \int_a^b p(n)\, \mathrm{d}n$ is used for describing the area under the curve of $p(n)$ which gives us the probability of finding the  variable $n$ under the interval $(a,b)$ where $a<n<b$
  - for some random variable $X$ which has a probability density function $f$, we have:
  - $f(x) \ge 0$ for all $-\infty<x<\infty$.
  - $\displaystyle \int_{-\infty}^\infty f(x)\mathrm{d}x=1$
  - $P(a<X<b)=\displaystyle \int_a^bf(x)\mathrm{d}x$
 
### example 1
- probability of a randomly generated value form the given graph
- if the probability of generating the numbers b/w -1 and 1 is 0.68, in notation we write it as $\mathbb{P}(-1<X<1) \doteq 0.68$
  
```{r syntaxblock,include=FALSE}
#for writing f(x)>=a we can write $f(x) \ge a$

#For writing range if x values b/w -infinity to infinity we can write 
# $-\infty<x<\infty$
#methods  to give probability symbol-
#   \mathbb{P}(-1<X<1) 
#   \prob(-1<X<1)
# \ and , comma can be used to seperate the different parts of the latex notation
# all these are same
# $Var(X)=\displaystyle \int_{-\infty}^{\infty}\,\ (x-\mu)^2f(x)\,\mathrm{d}x$
#Var(X)=\displaystyle \int_{-\infty}^{\infty}\, (x-\mu)^2f(x)\,\mathrm{d}x
#$Var(X)=\displaystyle \int_{-\infty}^{\infty}\, (x-\mu)^2f(x),\mathrm{d}x$
#this is not equivalent-
#$Var(X)=\displaystyle \int_{-\infty}^{\infty}\, (x-\mu)^2f(x),mathrm{d}x$
# 2 parts adjacen tto each other cannot be seperated just by commas-at least one should have a opening \ or other should have a closing \

# to put an operation on more than one symbols we use {}
#\sqrt(Var(X))--square root symbol only one V character-- is different than \sqrt{Var(X)}-- square root over the whole expression
```

### example 2
#### discrete distributions
- we use the probability mass function
  - this function gives discrete probabilities to the random variable $X$
  - if the random variable $X$ has some discrete probability mass function p, then:
$$
  \sum_n p(n)=1
$$

 where the sum goes  for all the values of $x$ for which $p(x)> 0$.
#### rule to note:if we use "$$.....$$" to represent the block of r code then this r code is not seen in he knitted file-while the regular r code can be seen in the usually created knitted file

#### rule:when we do include=TRUE or FALSE we mean that we want to either show the output of the r chunk or not
#### if we write echo=FLASE or TRUE we mean that we want to show the code snippet of the r chunk in the html or rmd file or not
### discrete and continuous probabilites when mixed in one distribution
- we get MIXED DISTRIBUTION-still the sum of probabilities of all the points is 1

## Expectation 
- average or balancing point of the distribution
- mean of the values weighted by their probabilities
- tending value(limit) of the mean as the sample size approaches infinity

## MEAN
- expected value of random variable  $X$ is $E(X)$
- expected value of a function of a random variable  is $E(f(x))$
- symbol to represent mean is $\mu$
- $E(X)=\displaystyle \int_{-\infty}^\infty xf(x)\mathrm{d}x$
- this is the average value of $X$ weighted by $p(x)$


## STANDARD DEVIATION/VARIANCE
- $Var(X)=E((X-\mu))^2)$ where $\mu=E(X)$
- variance is denoted by $\sigma^2$
- variance and sd cannot be negative
- when x is continuous with density function $f$
- $Var(X)=\displaystyle \int_{-\infty}^{\infty}\, (x-\mu)^2f(x),\mathrm{d}x$
- when x is discrete with mass function $\mu$
- $Var(X)=\sum_x(x-\mu)^2p(x)$
- same expression when written inside a block of r code-made by using 2 $ in sequence and writing in separate lines
$$
Var(X)=\sum_x(x-\mu)^2p(x)
$$

- in both the cases the standard deviation is: $SD(X)=\sqrt{Var(X)}$

### example 2
- calculating the left out value of probability

### kable extra uses the shiny package of the r programming language
```{r problem2,include=TRUE,echo=FALSE}
prob2=tibble(
  x=0:4,
  p=c(0.15,0.25,0.05,0.35,NA)
)
prob2

prob2 %>% pivot_wider(names_from=x,values_from=p) %>% mutate(x="P(X=x)") %>% relocate(x) %>%  kable() %>% kable_styling(position="left",full_width = FALSE,bootstrap_options = c("striped","condensed"))
prob2

```

### solution 
$$
\sum_x\mathbb{P}(X=x)=1
$$
- we have to find the probability when X=4
```{r}
prob2
partial_sum=prob2 %>% filter(x!=4) %>% summarize(sum_p=sum(p)) %>% pull(sum_p)
p_last=1-partial_sum
print(p_last)
#adding the last value
prob2<-prob2 %>% mutate(p=case_when(is.na(p)~p_last,TRUE~p))
prob2
```
### example 3
- finding the mean of the distribution
$$
\mu=E(X)=\sum_x^4xP(X=x)
$$
```{r question2}
x=prob2$x
p=prob2$p
mu=sum(x*p)
mu
```
### example 4
- find the variance and standard deviation
- put the complex blocks of notations like x=0 in the lower limit in {} so that they go with x in  the lower bound only 
$$
\sigma^2=Var(X)=\sum_{x=0}^4(x-\mu)^2P(X=x)
$$
```{r graphing}
plot1<-ggplot(prob2,aes(x=x,y=p))+geom_segment(aes(yend=0,xend=x),color="blue",linewidth=2)+geom_hline(yintercept =0)+ylab("P(X=x)")
#size=2 is deprecated version of linewidth() attribute
plot1
```
- nth standard deviation on both sides =$\mu+c(-n,n)*sd
```{r meansd}
variance=sum((x-mu)^2*p)
sd=sqrt(variance)
variance
sd
#pull is used to extract a vector/column(all the rows of the column) from a table
plot1+geom_vline(xintercept =mu,color="red",linetype="dashed")+geom_vline(xintercept=mu+c(-1,1)*sd,color="black",linetype="dotted")
```
#### example 5
- find the value of a
- we calculate the sum of the probabilities and then apply the concept that the probabilities should add upto 1-so a should be equal to the reciprocal of the sum

$$
P(X=x)=a(6-|x-5|),\quad x=0,1,2,3\ldots,9,10
$$

```{r question5}
x=0:10
p5=6-abs(x-5)
a=1/sum(p5)
sum_p5=sum(p5)
sum_p5
p5=p5*a
prob5=tibble(x=x,p=p5)
prob5

prob_5_version2=tibble(x=0:10,p=6-abs(x-5)) %>% mutate(p=p/sum(p))
# a is p/sum(p)

```


### example 6 
- continuous variable $U$ given-distribution is between 0 and 10
- find its density function $f(x)$
- $f(x)=0.1,\quad 0<x<10$

- create a large number of values of random variables
    - use runif() method
- create a density function out of some random variable's values
    - use dunif() method
fill a density curve
    - use geom_ribbon() method with ymin and ymax values/attributes
    
    
```{r extra graph}
gnorm(mu=0,sigma=1, linewidth = 1.5) +
  ylab("Density") +
  theme(axis.text=element_text(size=20),
        axis.title=element_text(size=22,face="bold"))


gnorm(mu=0,sigma=1, size = 1.5) +
  geom_norm_fill(mu = 0, sigma = 1, a = -1, b = 1, fill = "blue", alpha = 0.1) +
  ylab("Density") +
  theme(axis.text=element_text(size=20),
        axis.title=element_text(size=22,face="bold"))


a = 2
b = 5
ggplot(tibble(x=c(a,b), y=1/(b-a)), aes(x,y)) +
  geom_hline(yintercept = 0, color = "gray") +
  geom_line(size=1.5) +
  geom_segment(aes(xend=x, yend=rep(0,2)), size=1.5) +
  geom_segment(aes(x=a-1, y=0, xend=a, yend=0), size=1.5) +
  geom_segment(aes(x=b+1, y=0, xend=b, yend=0), size=1.5) +
  ylim(c(0, 1/(b-a))) +
  xlim(c(a-1, b+1)) +
  scale_x_continuous(breaks = seq(a-1,b+1)) +
  xlab("X") +
  ylab("Density")+
  ggtitle(paste0("Uniform(",a, ", ", b, ")")) +
  theme(axis.text=element_text(size=20),
        axis.title=element_text(size=22,face="bold"))



a = 2
b = 5
ggplot(tibble(x=c(a,b), y=1/(b-a)), aes(x,y)) +
  geom_hline(yintercept = 0, color = "gray") +
  geom_polygon(aes(x = x, y = y),
               data = tibble(x = c(3,3,5,5), y = c(0,1/3,1/3,0)),
               fill = "gray", alpha = 0.8) +
  geom_line(size=1.5) +
  geom_segment(aes(xend=x, yend=rep(0,2)), size=1.5) +
  geom_segment(aes(x=a-1, y=0, xend=a, yend=0), size=1.5) +
  geom_segment(aes(x=b+1, y=0, xend=b, yend=0), size=1.5) +
  
  ylim(c(0, 1/(b-a))) +
  xlim(c(a-1, b+1)) +
  scale_x_continuous(breaks = seq(a-1,b+1)) +
  xlab("X") +
  ylab("Density")+
  ggtitle(paste0("Uniform(",a, ", ", b, ")")) +
  theme(axis.text=element_text(size=20),
        axis.title=element_text(size=22,face="bold"))
```